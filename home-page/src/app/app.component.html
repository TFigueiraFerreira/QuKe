<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="app.component.css">

</head>
<body>
    <div class="header" id="header">
        <div class="nav_bar" id="nav_bar"></div>
    </div>
        <div class="feed" id="feed">
            <div class="post" id="post">
                <div class="post_votes" id="post_votes"></div>
                <div class="post_comments" id="post_comments"></div>
                <div class="post_share" id="post_share"></div>
                <div class="post_submit" id="post_submit"></div>
                <div class="post_photo1" id="post_photo1"></div>
                <div class="post_photo2" id="post_photo2"></div>
                <div class="post_pic" id="post_pic"></div>
            </div>
            </div>
        <div class="create_post" id="create_post">
            <div class="create_post_img" id="create_post_img"></div>
            <div class="create_post_gif" id="create_post_gif"></div>
            <div class="create_post_emoji" id="create_post_emoji"></div>
            <div class="create_post_submit" id="create_post_submit"></div>
            <div class="create_post_typebar" id="create_post_typebar">
              <input class="typebar_text" type="text" id="typebar_text" name="typebar_text"> 
            </div>
            <div class="create_post_pic" id="create_post_pic"></div>
        </div>
    <div class="recomended_panel" id="recomended_panel">
      <div class="follower1" id="follower1">
        <div class="follower1_follow" id="follower1_follow"></div>
        <div class="follower1_pic" id="follower1_pic"></div>
      <div class="follower2" id="follower2">
        <div class="follower2_follow" id="follower2_follow"></div>
        <div class="follower2_pic" id="follower2_pic"></div>
      </div>
      <div class="follower3" id="follower3">
        <div class="follower3_follow" id="follower3_follow"></div>
        <div class="follower3_pic" id="follower3_pic"></div>
      </div>
      <div class="follower4" id="follower4">
        <div class="follower4_follow" id="follower4_follow"></div>
        <div class="follower4_pic" id="follower4_pic"></div>
      </div>
      <div class="follower5" id="follower5">
        <div class="follower5_follow" id="follower5_follow"></div>
        <div class="follower5_pic" id="follower5_pic"></div>
      </div>
    </div>
    <div class="barras" id="barras"></div>

    
<script>
const container = document.getElementById('feed');

function createPostElement() {
  const post = document.createElement('div');
  post.classList.add('post');

  const postVotes = document.createElement('div');
  postVotes.classList.add('post_votes');
  post.appendChild(postVotes);

  const postComments = document.createElement('div');
  postComments.classList.add('post_comments');
  post.appendChild(postComments);

  const postShare = document.createElement('div');
  postShare.classList.add('post_share');
  post.appendChild(postShare);

  const postSubmit = document.createElement('div');
  postSubmit.classList.add('post_submit');
  post.appendChild(postSubmit);

  const postPhoto1 = document.createElement('div');
  postPhoto1.classList.add('post_photo1');
  const postPhoto1Image = document.createElement('img');
  postPhoto1Image.src = 'Mildred_Harris_auto_to_Louise_Glaum_R-256x343.jpg';
  postPhoto1.appendChild(postPhoto1Image);
  post.appendChild(postPhoto1);

  const postPhoto2 = document.createElement('div');
  postPhoto2.classList.add('post_photo2');
  const postPhoto2Image = document.createElement('img');
  postPhoto2Image.src = '2f7097bde863d9bb85b8aecb874f7691.jpg';
  postPhoto2.appendChild(postPhoto2Image);
  post.appendChild(postPhoto2);

  const postPic = document.createElement('div');
  postPic.classList.add('post_pic');
  post.appendChild(postPic);

  return post;
}

let isLoading = false;

function addInitialPosts() {
  if (!isLoading) {
    isLoading = true;
    for (let i = 0; i < 3; i++) {
      const post = createPostElement();
      container.appendChild(post);
    }
    isLoading = false;
  }
}

function newPost() {
  if (!isLoading) {
    isLoading = true;
    const post = createPostElement();
    container.appendChild(post);
    isLoading = false;
  }
}

let previousScrollPosition = 0;
const scrollThreshold = 100;
let debounceTimeout;

window.addEventListener('load', () => {
  addInitialPosts();
});

window.addEventListener('scroll', () => {
  const currentScrollPosition = window.pageYOffset;
  const scrolledPastThreshold = currentScrollPosition - previousScrollPosition > scrollThreshold;
  const isAtBottom = window.innerHeight + currentScrollPosition >= document.body.offsetHeight;

  if (isAtBottom && !isLoading) {
    clearTimeout(debounceTimeout);
    debounceTimeout = setTimeout(() => {
      newPost();
    }, 450); // Adjust the delay as needed (in milliseconds)
  }

  previousScrollPosition = currentScrollPosition;
});

</script>

</body>
</html>