<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="app.component.css">

</head>
<body>
    <div class="header" id="header">
        <div class="nav_bar" id="nav_bar"></div>
    </div>
        <div class="feed" id="feed">
            <div class="post" id="post">
                <div class="post_votes" id="post_votes"></div>
                <div class="post_comments" id="post_comments"></div>
                <div class="post_share" id="post_share"></div>
                <div class="post_submit" id="post_submit"></div>
                <div class="post_photo1" id="post_photo1"></div>
                <div class="post_photo2" id="post_photo2"></div>
                <div class="post_pic" id="post_pic"></div>
            </div>
            </div>
        <div class="create_post" id="create_post">
            <div class="create_post_img" id="create_post_img"></div>
            <div class="create_post_gif" id="create_post_gif"></div>
            <div class="create_post_emoji" id="create_post_emoji"></div>
            <div class="create_post_submit" id="create_post_submit"></div>
            <div class="create_post_typebar" id="create_post_typebar"></div>
            <div class="create_post_pic" id="create_post_pic"></div>
        </div>
    <div class="ad_panel" id="ad_panel"></div>
    <div class="barras" id="barras"></div>

    
<script>
const container = document.getElementById('feed');

function createPostElement() {
  const post = document.createElement('div');
  post.classList.add('post');

  const postVotes = document.createElement('div');
  postVotes.classList.add('post_votes');
  post.appendChild(postVotes);

  const postComments = document.createElement('div');
  postComments.classList.add('post_comments');
  post.appendChild(postComments);

  const postShare = document.createElement('div');
  postShare.classList.add('post_share');
  post.appendChild(postShare);

  const postSubmit = document.createElement('div');
  postSubmit.classList.add('post_submit');
  post.appendChild(postSubmit);

  const postPhoto1 = document.createElement('div');
  postPhoto1.classList.add('post_photo1');
  post.appendChild(postPhoto1);

  const postPhoto2 = document.createElement('div');
  postPhoto2.classList.add('post_photo2');
  post.appendChild(postPhoto2);

  const postPic = document.createElement('div');
  postPic.classList.add('post_pic');
  post.appendChild(postPic);

  return post;
}

let isLoading = false;

function addInitialPosts() {
  if (!isLoading) {
    isLoading = true;
    for (let i = 0; i < 3; i++) {
      const post = createPostElement();
      container.appendChild(post);
    }
    isLoading = false;
  }
}

function newPost() {
  if (!isLoading) {
    isLoading = true;
    const post = createPostElement();
    container.appendChild(post);
    isLoading = false;
  }
}

let previousScrollPosition = 0;
const scrollThreshold = 100;
let debounceTimeout;

window.addEventListener('load', () => {
  addInitialPosts();
});

window.addEventListener('scroll', () => {
  const currentScrollPosition = window.pageYOffset;
  const scrolledPastThreshold = currentScrollPosition - previousScrollPosition > scrollThreshold;
  const isAtBottom = window.innerHeight + currentScrollPosition >= document.body.offsetHeight;

  if (isAtBottom && !isLoading) {
    clearTimeout(debounceTimeout);
    debounceTimeout = setTimeout(() => {
      newPost();
    }, 500); // Adjust the delay as needed (in milliseconds)
  }

  previousScrollPosition = currentScrollPosition;
});

</script>

</body>
</html>